{
  "$schema": "../../connector.schema.json",
  "id": "clipboard",
  "name": "剪贴板连接器",
  "version": "0.1.9",
  "author": "Linch Mind Team",
  "description": "高性能C++版本剪贴板监控连接器，体积小巧，资源占用低，监控系统剪贴板变化并自动记录和索引复制的内容",
  "license": "MIT",
  "homepage": "https://github.com/linch-mind/connectors/clipboard",
  "category": "system",
  "icon": "clipboard",
  "entry": {
    "development": {
      "command": "./clipboard-connector",
      "args": [],
      "working_dir": "."
    },
    "production": {
      "windows": "clipboard-connector.exe",
      "macos": "clipboard-connector",
      "linux": "clipboard-connector"
    }
  },
  "permissions": [
    "system:clipboard",
    "network:daemon-api"
  ],
  "platforms": {
    "windows": {
      "min_version": "10"
    },
    "macos": {
      "min_version": "10.15"
    },
    "linux": {
      "min_version": "ubuntu-20.04"
    }
  },
  "capabilities": {
    "supports_multiple_instances": false,
    "max_instances": 1,
    "hot_reload": true
  },
  "build": {
    "pre_build": "echo 'Preparing C++ build environment'",
    "build_command": "./build.sh",
    "post_build": "echo 'C++ build completed, binary size optimized'"
  },
  "config_schema_source": "static",
  "config_schema": {
    "type": "object",
    "title": "剪贴板连接器配置",
    "description": "高性能剪贴板监控连接器的配置选项",
    "properties": {
      "check_interval": {
        "type": "number",
        "title": "检查间隔 (秒)",
        "description": "剪贴板内容检查频率，较小值消耗更多CPU",
        "minimum": 0.1,
        "maximum": 10.0,
        "default": 1.0
      },
      "min_content_length": {
        "type": "integer",
        "title": "最小内容长度",
        "description": "内容少于此长度将被忽略",
        "minimum": 1,
        "maximum": 1000,
        "default": 5
      },
      "max_content_length": {
        "type": "integer",
        "title": "最大内容长度",
        "description": "内容超过此长度将被截断",
        "minimum": 100,
        "maximum": 1000000,
        "default": 50000
      },
      "content_filters": {
        "type": "object",
        "title": "内容过滤",
        "description": "配置内容过滤规则",
        "properties": {
          "filter_urls": {
            "type": "boolean",
            "title": "过滤URL",
            "description": "是否忽略纯URL内容",
            "default": false
          },
          "filter_sensitive": {
            "type": "boolean",
            "title": "过滤敏感内容",
            "description": "是否过滤可能包含密码等敏感信息的内容",
            "default": true
          },
          "ignore_patterns": {
            "type": "array",
            "title": "忽略模式",
            "description": "正则表达式模式，匹配的内容将被忽略",
            "items": {
              "type": "string"
            },
            "default": [
              "^\\s*$",
              "^[a-zA-Z0-9+/]+=*$"
            ]
          }
        }
      },
      "performance": {
        "type": "object",
        "title": "性能设置",
        "description": "性能相关配置",
        "properties": {
          "enable_deduplication": {
            "type": "boolean",
            "title": "启用去重",
            "description": "避免重复处理相同内容",
            "default": true
          },
          "batch_size": {
            "type": "integer",
            "title": "批处理大小",
            "description": "批量处理剪贴板变化的数量",
            "minimum": 1,
            "maximum": 100,
            "default": 10
          }
        }
      }
    },
    "required": [
      "check_interval",
      "min_content_length",
      "max_content_length"
    ]
  },
  "config_ui_schema": {
    "ui_layout": "sections",
    "ui:sections": {
      "basic_config": {
        "ui:title": "基础设置",
        "ui:description": "剪贴板监控的基本配置",
        "ui:icon": "clipboard",
        "ui:collapsible": false,
        "ui:fields": {
          "check_interval": {
            "ui:widget": "slider",
            "ui:help": "检查频率，影响响应速度和CPU占用",
            "ui:step": 0.1
          },
          "min_content_length": {
            "ui:help": "太短的内容通常没有价值"
          },
          "max_content_length": {
            "ui:widget": "slider",
            "ui:help": "限制内容长度，避免处理过大文件"
          }
        }
      },
      "filter_config": {
        "ui:title": "内容过滤",
        "ui:description": "配置要忽略的内容类型",
        "ui:icon": "filter_alt",
        "ui:collapsible": true,
        "ui:collapsed": true,
        "ui:fields": {
          "content_filters.filter_urls": {
            "ui:widget": "switch",
            "ui:help": "网址通常价值有限，可选择忽略"
          },
          "content_filters.filter_sensitive": {
            "ui:widget": "switch",
            "ui:help": "自动检测并过滤密码、密钥等敏感内容"
          },
          "content_filters.ignore_patterns": {
            "ui:widget": "tag_input",
            "ui:help": "自定义正则表达式，匹配的内容将被忽略"
          }
        }
      },
      "performance_config": {
        "ui:title": "性能优化",
        "ui:description": "调整性能相关参数",
        "ui:icon": "speed",
        "ui:collapsible": true,
        "ui:collapsed": true,
        "ui:fields": {
          "performance.enable_deduplication": {
            "ui:widget": "switch",
            "ui:help": "避免重复处理相同内容，节省资源"
          },
          "performance.batch_size": {
            "ui:widget": "slider",
            "ui:help": "批量处理可提高效率，但会增加延迟"
          }
        }
      }
    }
  },
  "config_default_values": {
    "check_interval": 1.0,
    "min_content_length": 5,
    "max_content_length": 50000,
    "content_filters": {
      "filter_urls": false,
      "filter_sensitive": true,
      "ignore_patterns": [
        "^\\s*$",
        "^[a-zA-Z0-9+/]+=*$"
      ]
    },
    "performance": {
      "enable_deduplication": true,
      "batch_size": 10
    }
  }
}