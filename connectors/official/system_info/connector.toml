# Linch Mind - ç³»ç»Ÿä¿¡æ¯è¿æ¥å™¨é…ç½®
# é«˜æ€§èƒ½ç³»ç»Ÿä¿¡æ¯è¿æ¥å™¨ï¼Œå®æ—¶ç›‘æ§ç³»ç»Ÿèµ„æºå’ŒçŠ¶æ€

[metadata]
id = "system_info"
name = "ç³»ç»Ÿä¿¡æ¯è¿æ¥å™¨"
version = "1.0.0"
author = "Linch Mind Team"
description = "äº‹ä»¶é©±åŠ¨çš„ç³»ç»Ÿä¿¡æ¯è¿æ¥å™¨ï¼Œç›‘æ§CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ç³»ç»Ÿèµ„æº"
homepage = "https://github.com/linch-mind/connectors/system_info"
license = "MIT"
category = "system"
icon = "computer"

# JSON Schema å¼•ç”¨
schema = "../../connector.schema.json"

[build]
build_command = "./build.sh"
pre_build = "echo 'Preparing C++ build environment'"
post_build = "echo 'System info build completed'"

[capabilities]
hot_reload = true
max_instances = 1
supports_multiple_instances = false

# æƒé™è¦æ±‚
permissions = [
    "system:read",
    "network:status",
    "network:daemon-api"
]

# å¹³å°æ”¯æŒ
[platforms.linux]
min_version = "ubuntu-20.04"

[platforms.macos]
min_version = "10.15"

[platforms.windows]
min_version = "10"

# å…¥å£ç‚¹é…ç½®
[entry.development]
command = "bash"
working_dir = "."
args = [
    "-c",
    """# Smart build and run
exe_name='linch-mind-system-info'
[[ '$OSTYPE' == 'msys' || '$OSTYPE' == 'win32' ]] && exe_name='$exe_name.exe'

# Check if build is needed
if [[ ! -f "bin/release/$exe_name" && ! -f "bin/debug/$exe_name" ]] || [[ src/main.cpp -nt "bin/release/$exe_name" ]] || [[ src/main.cpp -nt "bin/debug/$exe_name" ]]; then
  echo 'ğŸ”¨ Building connector...'
  ./build.sh > /dev/null 2>&1 || { echo 'Build failed'; exit 1; }
fi

# Run the newest build
if [[ -f "bin/debug/$exe_name" ]]; then
  exec "./bin/debug/$exe_name"
elif [[ -f "bin/release/$exe_name" ]]; then
  exec "./bin/release/$exe_name"
else
  echo 'âŒ No executable found after build'
  exit 1
fi"""
]

[entry.production]
linux = "bin/release/linch-mind-system-info"
macos = "bin/release/linch-mind-system-info"
windows = "bin/release/linch-mind-system-info.exe"

# é»˜è®¤é…ç½®å€¼ - å®Œæ•´ç³»ç»Ÿèµ„æºç›‘æ§
[config_default_values]
enable_cpu_monitoring = true       # å¯ç”¨CPUç›‘æ§
enable_memory_monitoring = true    # å¯ç”¨å†…å­˜ç›‘æ§
enable_disk_monitoring = true      # å¯ç”¨ç£ç›˜ç›‘æ§
enable_network_monitoring = true   # å¯ç”¨ç½‘ç»œç›‘æ§
enable_process_monitoring = true   # å¯ç”¨è¿›ç¨‹ç›‘æ§
enable_temperature_monitoring = true # å¯ç”¨æ¸©åº¦ç›‘æ§
update_interval_seconds = 5        # æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
cpu_threshold_percent = 80         # CPUä½¿ç”¨ç‡é˜ˆå€¼
memory_threshold_percent = 90      # å†…å­˜ä½¿ç”¨ç‡é˜ˆå€¼
disk_threshold_percent = 95        # ç£ç›˜ä½¿ç”¨ç‡é˜ˆå€¼
network_threshold_mbps = 100       # ç½‘ç»œæµé‡é˜ˆå€¼ï¼ˆMbpsï¼‰
temperature_threshold_celsius = 80 # æ¸©åº¦é˜ˆå€¼ï¼ˆæ‘„æ°åº¦ï¼‰
top_process_count = 10             # ç›‘æ§çš„TOPè¿›ç¨‹æ•°é‡
enable_performance_alerts = true   # å¯ç”¨æ€§èƒ½å‘Šè­¦
historical_data_retention_days = 30 # å†å²æ•°æ®ä¿ç•™å¤©æ•°

# é…ç½®æ¨¡å¼å®šä¹‰
[config_schema]
description = "ç³»ç»Ÿä¿¡æ¯è¿æ¥å™¨çš„é…ç½®é€‰é¡¹"
title = "ç³»ç»Ÿä¿¡æ¯è¿æ¥å™¨é…ç½®"
type = "object"
config_schema_source = "static"

[config_schema.properties.enable_cpu_monitoring]
title = "å¯ç”¨CPUç›‘æ§"
description = "ç›‘æ§CPUä½¿ç”¨ç‡å’Œè´Ÿè½½"
type = "boolean"
default = true

[config_schema.properties.enable_memory_monitoring]
title = "å¯ç”¨å†…å­˜ç›‘æ§"
description = "ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ"
type = "boolean"
default = true

[config_schema.properties.enable_disk_monitoring]
title = "å¯ç”¨ç£ç›˜ç›‘æ§"
description = "ç›‘æ§ç£ç›˜ä½¿ç”¨æƒ…å†µ"
type = "boolean"
default = true

[config_schema.properties.enable_network_monitoring]
title = "å¯ç”¨ç½‘ç»œç›‘æ§"
description = "ç›‘æ§ç½‘ç»œæ¥å£çŠ¶æ€å’Œæµé‡"
type = "boolean"
default = true

[config_schema.properties.enable_process_monitoring]
title = "å¯ç”¨è¿›ç¨‹ç›‘æ§"
description = "ç›‘æ§ç³»ç»Ÿè¿›ç¨‹å’Œèµ„æºå ç”¨"
type = "boolean"
default = true

[config_schema.properties.enable_temperature_monitoring]
title = "å¯ç”¨æ¸©åº¦ç›‘æ§"
description = "ç›‘æ§ç³»ç»Ÿæ¸©åº¦çŠ¶æ€"
type = "boolean"
default = true

[config_schema.properties.update_interval_seconds]
title = "æ›´æ–°é—´éš” (ç§’)"
description = "ç³»ç»Ÿä¿¡æ¯æ›´æ–°çš„æ—¶é—´é—´éš”"
type = "integer"
minimum = 1
maximum = 60
default = 5

[config_schema.properties.cpu_threshold_percent]
title = "CPUé˜ˆå€¼ (%)"
description = "CPUä½¿ç”¨ç‡å‘Šè­¦é˜ˆå€¼"
type = "integer"
minimum = 50
maximum = 100
default = 80

[config_schema.properties.memory_threshold_percent]
title = "å†…å­˜é˜ˆå€¼ (%)"
description = "å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦é˜ˆå€¼"
type = "integer"
minimum = 50
maximum = 100
default = 90

[config_schema.properties.disk_threshold_percent]
title = "ç£ç›˜é˜ˆå€¼ (%)"
description = "ç£ç›˜ä½¿ç”¨ç‡å‘Šè­¦é˜ˆå€¼"
type = "integer"
minimum = 50
maximum = 100
default = 95

[config_schema.properties.network_threshold_mbps]
title = "ç½‘ç»œæµé‡é˜ˆå€¼ (Mbps)"
description = "ç½‘ç»œæµé‡å‘Šè­¦é˜ˆå€¼"
type = "integer"
minimum = 10
maximum = 1000
default = 100

[config_schema.properties.temperature_threshold_celsius]
title = "æ¸©åº¦é˜ˆå€¼ (Â°C)"
description = "ç³»ç»Ÿæ¸©åº¦å‘Šè­¦é˜ˆå€¼"
type = "integer"
minimum = 60
maximum = 100
default = 80

[config_schema.properties.top_process_count]
title = "TOPè¿›ç¨‹æ•°é‡"
description = "ç›‘æ§çš„èµ„æºå ç”¨æœ€é«˜çš„è¿›ç¨‹æ•°é‡"
type = "integer"
minimum = 5
maximum = 20
default = 10

[config_schema.properties.enable_performance_alerts]
title = "å¯ç”¨æ€§èƒ½å‘Šè­¦"
description = "å½“ç³»ç»Ÿèµ„æºè¶…è¿‡é˜ˆå€¼æ—¶å‘é€å‘Šè­¦"
type = "boolean"
default = true

[config_schema.properties.historical_data_retention_days]
title = "å†å²æ•°æ®ä¿ç•™å¤©æ•°"
description = "ç³»ç»Ÿç›‘æ§å†å²æ•°æ®çš„ä¿ç•™æœŸé™"
type = "integer"
minimum = 7
maximum = 365
default = 30

# å¿…éœ€é…ç½®å­—æ®µ
config_schema.required = []

# UIé…ç½®æ¨¡å¼
[config_ui_schema]
ui_layout = "sections"

# UIèŠ‚æ®µé…ç½®
[config_ui_schema.ui_sections.monitoring_config]
ui_title = "ç›‘æ§è®¾ç½®"
ui_icon = "monitor"
ui_description = "é…ç½®ç³»ç»Ÿç›‘æ§é€‰é¡¹"
ui_collapsible = false

[config_ui_schema.ui_sections.monitoring_config.ui_fields.enable_cpu_monitoring]
ui_widget = "switch"
ui_help = "ç›‘æ§CPUä½¿ç”¨ç‡å’Œç³»ç»Ÿè´Ÿè½½"

[config_ui_schema.ui_sections.monitoring_config.ui_fields.enable_memory_monitoring]
ui_widget = "switch"
ui_help = "ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µå’Œäº¤æ¢ç©ºé—´"

[config_ui_schema.ui_sections.monitoring_config.ui_fields.enable_disk_monitoring]
ui_widget = "switch"
ui_help = "ç›‘æ§ç£ç›˜ä½¿ç”¨æƒ…å†µå’ŒI/O"

[config_ui_schema.ui_sections.monitoring_config.ui_fields.enable_network_monitoring]
ui_widget = "switch"
ui_help = "ç›‘æ§ç½‘ç»œæ¥å£çŠ¶æ€å’Œæµé‡"

[config_ui_schema.ui_sections.monitoring_config.ui_fields.enable_process_monitoring]
ui_widget = "switch"
ui_help = "ç›‘æ§ç³»ç»Ÿè¿›ç¨‹å’Œèµ„æºå ç”¨æƒ…å†µ"

[config_ui_schema.ui_sections.monitoring_config.ui_fields.enable_temperature_monitoring]
ui_widget = "switch"
ui_help = "ç›‘æ§ç³»ç»Ÿæ¸©åº¦ï¼Œé¢„é˜²è¿‡çƒ­"

[config_ui_schema.ui_sections.performance_config]
ui_title = "æ€§èƒ½é…ç½®"
ui_icon = "speed"
ui_description = "é…ç½®æ›´æ–°é¢‘ç‡å’Œé˜ˆå€¼"
ui_collapsed = false
ui_collapsible = true

[config_ui_schema.ui_sections.performance_config.ui_fields.update_interval_seconds]
ui_widget = "slider"
ui_step = 1
ui_unit = "ç§’"
ui_help = "è¾ƒå°å€¼æä¾›æ›´å®æ—¶çš„æ•°æ®ï¼Œä½†æ¶ˆè€—æ›´å¤šèµ„æº"

[config_ui_schema.ui_sections.performance_config.ui_fields.top_process_count]
ui_widget = "slider"
ui_step = 1
ui_unit = "ä¸ª"
ui_help = "ç›‘æ§èµ„æºå ç”¨æœ€é«˜çš„è¿›ç¨‹æ•°é‡"

[config_ui_schema.ui_sections.alerts_config]
ui_title = "å‘Šè­¦é…ç½®"
ui_icon = "warning"
ui_description = "é…ç½®ç³»ç»Ÿèµ„æºå‘Šè­¦é˜ˆå€¼"
ui_collapsed = true
ui_collapsible = true

[config_ui_schema.ui_sections.alerts_config.ui_fields.enable_performance_alerts]
ui_widget = "switch"
ui_help = "å¯ç”¨æ€§èƒ½å‘Šè­¦åŠŸèƒ½"

[config_ui_schema.ui_sections.alerts_config.ui_fields.cpu_threshold_percent]
ui_widget = "slider"
ui_step = 5
ui_unit = "%"
ui_help = "è¶…è¿‡æ­¤å€¼æ—¶è§¦å‘CPUä½¿ç”¨ç‡å‘Šè­¦"

[config_ui_schema.ui_sections.alerts_config.ui_fields.memory_threshold_percent]
ui_widget = "slider"
ui_step = 5
ui_unit = "%"
ui_help = "è¶…è¿‡æ­¤å€¼æ—¶è§¦å‘å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦"

[config_ui_schema.ui_sections.alerts_config.ui_fields.disk_threshold_percent]
ui_widget = "slider"
ui_step = 5
ui_unit = "%"
ui_help = "è¶…è¿‡æ­¤å€¼æ—¶è§¦å‘ç£ç›˜ä½¿ç”¨ç‡å‘Šè­¦"

[config_ui_schema.ui_sections.alerts_config.ui_fields.network_threshold_mbps]
ui_widget = "slider"
ui_step = 10
ui_unit = "Mbps"
ui_help = "è¶…è¿‡æ­¤å€¼æ—¶è§¦å‘ç½‘ç»œæµé‡å‘Šè­¦"

[config_ui_schema.ui_sections.alerts_config.ui_fields.temperature_threshold_celsius]
ui_widget = "slider"
ui_step = 5
ui_unit = "Â°C"
ui_help = "è¶…è¿‡æ­¤å€¼æ—¶è§¦å‘æ¸©åº¦å‘Šè­¦"

[config_ui_schema.ui_sections.data_config]
ui_title = "æ•°æ®ç®¡ç†"
ui_icon = "database"
ui_description = "é…ç½®æ•°æ®ä¿ç•™å’Œç®¡ç†ç­–ç•¥"
ui_collapsed = true
ui_collapsible = true

[config_ui_schema.ui_sections.data_config.ui_fields.historical_data_retention_days]
ui_widget = "slider"
ui_step = 7
ui_unit = "å¤©"
ui_help = "å†å²ç›‘æ§æ•°æ®çš„ä¿ç•™æ—¶é—´"