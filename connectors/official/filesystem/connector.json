{
  "$schema": "../../connector.schema.json",
  "id": "filesystem",
  "name": "文件系统连接器",
  "version": "0.0.1",
  "type": "filesystem",
  "author": "Linch Mind Team",
  "description": "实时监控文件系统变化，支持多目录、多规则的智能文件索引",
  "license": "MIT",
  "homepage": "https://github.com/linch-mind/connectors/filesystem",
  "category": "local_files",
  "icon": "folder",
  
  "entry": {
    "development": {
      "command": "python3",
      "args": ["main.py"],
      "working_dir": "."
    },
    "production": {
      "windows": "filesystem-connector.exe",
      "macos": "filesystem-connector",
      "linux": "filesystem-connector"
    }
  },
  
  "permissions": [
    "filesystem:read",
    "filesystem:watch",
    "network:daemon-api"
  ],
  
  "platforms": {
    "windows": { "min_version": "10" },
    "macos": { "min_version": "10.15" },
    "linux": { "min_version": "ubuntu-20.04" }
  },
  
  
  "capabilities": {
    "supports_multiple_instances": true,
    "max_instances": 10,
    "hot_reload": true
  },
  
  "build": {
    "pre_build": "pip install -r requirements.txt",
    "build_command": "pyinstaller --onefile --name filesystem-connector main.py",
    "post_build": "echo 'Build completed'"
  },
  
  "config_schema": {
    "type": "object",
    "required": ["paths"],
    "properties": {
      "paths": {
        "type": "array",
        "description": "要监控的目录路径列表",
        "items": {
          "type": "string"
        },
        "minItems": 1
      },
      "extensions": {
        "type": "array",
        "description": "要监控的文件扩展名",
        "items": {
          "type": "string"
        },
        "default": [".txt", ".md", ".py", ".js", ".json"]
      },
      "ignore_patterns": {
        "type": "array",
        "description": "忽略的文件模式",
        "items": {
          "type": "string"
        },
        "default": ["*.tmp", ".*", "node_modules/*", "__pycache__/*"]
      },
      "max_file_size_mb": {
        "type": "integer",
        "description": "最大文件大小（MB）",
        "default": 10,
        "minimum": 1,
        "maximum": 1000
      }
    }
  }
}