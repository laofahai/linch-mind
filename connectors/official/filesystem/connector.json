{
  "$schema": "../../connector.schema.json",
  "id": "filesystem",
  "name": "æ–‡ä»¶ç³»ç»Ÿè¿æ¥å™¨",
  "version": "0.1.0",
  "author": "Linch Mind Team",
  "description": "å®æ—¶ç›‘æ§æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ï¼Œæ”¯æŒå¤šç›®å½•ã€å¤šè§„åˆ™çš„æ™ºèƒ½æ–‡ä»¶ç´¢å¼• (C++ç‰ˆæœ¬)",
  "license": "MIT",
  "homepage": "https://github.com/linch-mind/connectors/filesystem",
  "category": "local_files",
  "icon": "folder",
  "entry": {
    "development": {
      "command": "bash",
      "args": ["-c", "[[ ! -f filesystem-connector || src/main.cpp -nt filesystem-connector ]] && echo 'ğŸ”¨ Quick build needed...' && ./build.sh > /dev/null 2>&1 || true; ./filesystem-connector"],
      "working_dir": "."
    },
    "production": {
      "windows": "dist/bin/filesystem-connector.exe",
      "macos": "dist/bin/filesystem-connector",
      "linux": "dist/bin/filesystem-connector"
    }
  },
  "permissions": [
    "filesystem:read",
    "filesystem:watch",
    "network:daemon-api"
  ],
  "platforms": {
    "windows": {
      "min_version": "10"
    },
    "macos": {
      "min_version": "10.15"
    },
    "linux": {
      "min_version": "ubuntu-20.04"
    }
  },
  "capabilities": {
    "supports_multiple_instances": true,
    "max_instances": 10,
    "hot_reload": true,
    "webview_config": true
  },
  "build": {
    "pre_build": "echo 'Installing dependencies...'",
    "build_command": "./build.sh",
    "post_build": "echo 'C++ Filesystem connector build completed'"
  },
  "config_schema_source": "static",
  "config_schema": {
    "type": "object",
    "title": "æ–‡ä»¶ç³»ç»Ÿè¿æ¥å™¨é…ç½®",
    "description": "é…ç½®æ–‡ä»¶ç³»ç»Ÿç›‘æ§å‚æ•°å’Œè¿‡æ»¤è§„åˆ™",
    "required": ["watch_directories", "file_filters"],
    "properties": {
      "watch_directories": {
        "type": "array",
        "title": "ç›‘æ§ç›®å½•",
        "description": "è¦ç›‘æ§çš„ç›®å½•è·¯å¾„åˆ—è¡¨",
        "items": {
          "type": "string"
        },
        "default": ["~/Documents", "~/Desktop"],
        "minItems": 1
      },
      "file_filters": {
        "type": "object",
        "title": "æ–‡ä»¶è¿‡æ»¤å™¨",
        "description": "é…ç½®è¦åŒ…å«æˆ–æ’é™¤çš„æ–‡ä»¶ç±»å‹",
        "properties": {
          "include_extensions": {
            "type": "array",
            "title": "åŒ…å«çš„æ–‡ä»¶æ‰©å±•å",
            "description": "åªç›‘æ§è¿™äº›æ‰©å±•åçš„æ–‡ä»¶",
            "items": {
              "type": "string"
            },
            "default": [".txt", ".md", ".pdf", ".doc", ".docx", ".xls", ".xlsx", ".ppt", ".pptx"]
          },
          "exclude_patterns": {
            "type": "array", 
            "title": "æ’é™¤æ¨¡å¼",
            "description": "æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼ŒåŒ¹é…çš„æ–‡ä»¶å°†è¢«å¿½ç•¥",
            "items": {
              "type": "string"
            },
            "default": ["^\\..*", ".*\\.tmp$", ".*\\.log$", "__pycache__", "node_modules"]
          },
          "max_file_size": {
            "type": "integer",
            "title": "æœ€å¤§æ–‡ä»¶å¤§å° (MB)",
            "description": "è¶…è¿‡æ­¤å¤§å°çš„æ–‡ä»¶å°†è¢«å¿½ç•¥",
            "default": 50,
            "minimum": 1,
            "maximum": 1000
          }
        }
      },
      "scan_options": {
        "type": "object",
        "title": "æ‰«æé€‰é¡¹",
        "description": "æ§åˆ¶æ–‡ä»¶æ‰«æè¡Œä¸ºçš„é«˜çº§é€‰é¡¹",
        "properties": {
          "scan_interval": {
            "type": "number",
            "title": "æ‰«æé—´éš” (ç§’)",
            "description": "æ–‡ä»¶å˜åŒ–æ£€æŸ¥é¢‘ç‡",
            "default": 2.0,
            "minimum": 0.5,
            "maximum": 60.0
          },
          "recursive_depth": {
            "type": "integer",
            "title": "é€’å½’æ·±åº¦",
            "description": "å­ç›®å½•æ‰«æçš„æœ€å¤§æ·±åº¦",
            "default": 5,
            "minimum": 1,
            "maximum": 20
          },
          "enable_content_indexing": {
            "type": "boolean",
            "title": "å¯ç”¨å†…å®¹ç´¢å¼•",
            "description": "æ˜¯å¦ç´¢å¼•æ–‡ä»¶å†…å®¹",
            "default": true
          }
        }
      }
    }
  },
  "config_default_values": {
    "watch_directories": ["~/Documents", "~/Desktop"],
    "file_filters": {
      "include_extensions": [".txt", ".md", ".pdf", ".doc", ".docx", ".xls", ".xlsx", ".ppt", ".pptx"],
      "exclude_patterns": ["^\\..*", ".*\\.tmp$", ".*\\.log$", "__pycache__", "node_modules"],
      "max_file_size": 50
    },
    "scan_options": {
      "scan_interval": 2.0,
      "recursive_depth": 5,
      "enable_content_indexing": true
    }
  },
  "config_ui_schema": {
    "ui:sections": {
      "directories_config": {
        "ui:title": "ç›‘æ§ç›®å½•",
        "ui:icon": "folder",
        "ui:collapsible": false,
        "ui:description": "é€‰æ‹©è¦ç›‘æ§çš„ç›®å½•",
        "ui:fields": {
          "watch_directories": {
            "ui:widget": "directory_picker",
            "ui:help": "å¯ä»¥æ·»åŠ å¤šä¸ªç›®å½•è¿›è¡Œç›‘æ§"
          }
        }
      },
      "filter_config": {
        "ui:title": "æ–‡ä»¶è¿‡æ»¤",
        "ui:icon": "filter_alt",
        "ui:collapsed": true,
        "ui:collapsible": true,
        "ui:description": "é…ç½®è¦ç›‘æ§çš„æ–‡ä»¶ç±»å‹",
        "ui:fields": {
          "file_filters.include_extensions": {
            "ui:widget": "tag_input",
            "ui:help": "åªç›‘æ§æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶"
          },
          "file_filters.exclude_patterns": {
            "ui:widget": "tag_input", 
            "ui:help": "æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…çš„æ–‡ä»¶å°†è¢«å¿½ç•¥"
          },
          "file_filters.max_file_size": {
            "ui:widget": "slider",
            "ui:help": "å¤§æ–‡ä»¶é€šå¸¸å¤„ç†è€—æ—¶ï¼Œå»ºè®®è®¾ç½®åˆç†ä¸Šé™"
          }
        }
      },
      "advanced_config": {
        "ui:title": "é«˜çº§é€‰é¡¹",
        "ui:icon": "settings",
        "ui:collapsed": true,
        "ui:collapsible": true,
        "ui:description": "è°ƒæ•´æ‰«ææ€§èƒ½å‚æ•°",
        "ui:fields": {
          "scan_options.scan_interval": {
            "ui:widget": "slider",
            "ui:step": 0.5,
            "ui:help": "æ£€æŸ¥é¢‘ç‡ï¼Œè¾ƒå°å€¼æ¶ˆè€—æ›´å¤šèµ„æº"
          },
          "scan_options.recursive_depth": {
            "ui:widget": "slider",
            "ui:help": "æ·±å±‚ç›®å½•æ‰«æå¯èƒ½å½±å“æ€§èƒ½"
          },
          "scan_options.enable_content_indexing": {
            "ui:widget": "switch",
            "ui:help": "ç´¢å¼•æ–‡ä»¶å†…å®¹ç”¨äºæœç´¢ï¼Œä½†ä¼šæ¶ˆè€—æ›´å¤šèµ„æº"
          }
        }
      }
    },
    "ui_layout": "sections"
  }
}