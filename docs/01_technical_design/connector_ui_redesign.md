# 连接器管理界面深度设计分析

## 🎯 设计目标
打造"工具箱+应用商店"的双重体验，让用户在管理已有连接器和发现新连接器时有完全不同但都很舒适的体验。

## 📱 UI架构设计

### 主界面布局
```
┌─────────────────────────────────────────────────┐
│ 连接器管理                    [刷新] [添加本地]  │ <- 简化顶栏
├─────────────────────────────────────────────────┤
│ [📦 我的连接器]  [🏪 发现更多]                  │ <- 主Tab切换
├─────────────────────────────────────────────────┤
│ 📦 我的连接器 Tab:                              │
│ ┌─────────────────────────────────────────────┐ │
│ │ 🔍 搜索运行中的连接器...  [状态▼] [活跃度▼] │ │ <- 管理导向搜索
│ └─────────────────────────────────────────────┘ │
│ ┌─快速状态概览─────────────────────────────────┐ │
│ │ ✅ 3个运行中  ⚠️ 1个异常  ⏸️ 2个已停止    │ │ <- 仪表盘式概览
│ └─────────────────────────────────────────────┘ │
│ [连接器卡片列表 - 重点展示状态和操作]            │
├─────────────────────────────────────────────────┤
│ 🏪 发现更多 Tab:                               │
│ ┌─────────────────────────────────────────────┐ │
│ │ 🔍 发现连接器...  [分类▼] [热度▼] [筛选]   │ │ <- 发现导向搜索
│ └─────────────────────────────────────────────┘ │
│ ┌─推荐分类─────────────────────────────────────┐ │
│ │ [🗂️文件] [💬通讯] [⚡自动化] [🛠️开发工具]   │ │ <- 快速分类导航
│ └─────────────────────────────────────────────┘ │
│ [连接器卡片列表 - 重点展示功能和安装]            │
└─────────────────────────────────────────────────┘
```

## 🎨 视觉设计差异化

### "我的连接器"视觉风格
- **色调**：偏向管理色调（蓝色系）
- **重点信息**：状态指示器、数据统计、最后活跃时间
- **操作按钮**：启动/停止、配置、日志、删除
- **卡片样式**：紧凑的信息密度，突出状态

### "发现更多"视觉风格  
- **色调**：偏向探索色调（绿色系）
- **重点信息**：功能描述、作者、评分、预览图
- **操作按钮**：查看详情、安装、收藏
- **卡片样式**：更大的展示区域，突出吸引力

## 🔍 搜索与筛选策略

### 我的连接器搜索
```dart
enum InstalledConnectorFilter {
  all,           // 全部
  running,       // 运行中
  stopped,       // 已停止  
  error,         // 异常
  highActivity,  // 高活跃度
  noData,        // 无数据采集
}

enum InstalledConnectorSort {
  status,        // 按状态排序
  activity,      // 按活跃度排序
  dataCount,     // 按数据量排序
  lastHeartbeat, // 按最后心跳排序
}
```

### 发现更多搜索
```dart
enum MarketConnectorCategory {
  all,           // 全部
  filesystem,    // 文件系统
  communication, // 通讯工具
  automation,    // 自动化
  development,   // 开发工具
  productivity,  // 效率工具
}

enum MarketConnectorSort {
  recommended,   // 推荐
  newest,        // 最新
  popular,       // 最受欢迎
  rating,        // 评分最高
}
```

## 🎯 用户体验流程

### 管理流程（我的连接器）
1. **快速状态检查**：一眼看到整体健康状况
2. **问题优先**：异常连接器置顶显示
3. **一键操作**：常用操作（启动/停止）直接可见
4. **深度诊断**：点击展开看详细状态和日志

### 发现流程（发现更多）
1. **分类浏览**：按需求快速定位
2. **详情预览**：hover显示功能预览
3. **安装向导**：引导式安装配置
4. **使用指导**：安装后的快速上手指南

## 🔧 技术实现要点

### 数据分离
- **已安装**：使用现有的 `getConnectors()` API
- **市场**：新增 `getMarketConnectors()` API（远程注册表）
- **状态管理**：两个独立的状态管理器

### 搜索实现
- **本地搜索**：已安装连接器全本地过滤
- **远程搜索**：市场连接器支持服务端搜索和缓存
- **搜索体验**：防抖动搜索，搜索历史记录

### 性能优化
- **懒加载**：市场Tab按需加载
- **虚拟滚动**：大量连接器时的性能保障
- **缓存策略**：市场数据本地缓存24小时

## 🎭 情感化设计

### 空状态设计
- **已安装为空**：友好的引导安装第一个连接器
- **市场加载失败**：幽默的网络错误提示
- **搜索无结果**：建议相关的连接器

### 状态反馈
- **安装进度**：带动画的安装进度条
- **操作反馈**：微交互动画（启动成功的绿色脉冲）
- **错误提示**：友好的错误说明和解决建议

这样的设计让两种场景都有最适合的交互方式，而不是用一个界面强行兼顾两种需求。